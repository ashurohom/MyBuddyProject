{% extends 'base.html' %}
{% load static %}


{% block main %}
<body>
    <div class="donation-page">
        <div class="container">
            <h1 class="title">Donate to Help Our Pets</h1>
            <p class="subtitle">Every small contribution creates a big impact. Donate to save lives!</p>

            <div class="row">
                <!-- Left Column -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="{% static '/image/petdonate.png' %}" alt="Donation" class="card-image">
                        <p class="card-text">Your generosity helps provide food, shelter, and medical care to our furry friends. 
                            Together, we can make a difference! Your donation will go directly towards supporting the care of animals in need. 
                            Whether it's providing them with a warm place to sleep, food to nourish them, or necessary medical treatment, 
                            every contribution counts. Thank you for being a part of their journey!</p>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="col-md-8">
                    <h3 class="form-title">Donate Here</h3>

                    <!-- Donation Buttons -->
                    <div class="donation-buttons">
                        <button class="donation-btn" data-amount="100">100 ₹</button>
                        <button class="donation-btn" data-amount="300">300 ₹</button>
                        <button class="donation-btn" data-amount="500">500 ₹</button>
                        <button class="donation-btn" data-amount="1000">1000 ₹</button>
                        <button class="donation-btn" data-amount="1500">1500 ₹</button>
                    </div>

                    <!-- Donation Form -->
                    <form id="donation-form" method="POST" action="">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" placeholder="Enter your name" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" name="address" placeholder="Enter your address" required>
                        </div>
                        <div class="form-group">
                            <label for="mobile">Mobile Number</label>
                            <input type="text" id="mobile" name="mobile" placeholder="Enter your mobile number" required>
                        </div>
                        <div class="form-group">
                            <label for="donation-amount">Donation Amount</label>
                            <input type="number" id="donation-amount" name="donation-amount" placeholder="Enter donation amount" required>
                        </div>
                        <button type="submit" class="submit-btn">Continue</button>

                        {% comment %} <button id="rzp-button1" class="">Donate Now</button> {% endcomment %}
                        {% comment %} <button  class="btn btn-primary">Pay with Razorpay</button> {% endcomment %}
                    </form>
                    <a href="/payment"><button class="submit-btn">Payment</button></a>

                    {% comment %} <div class="razorpay-button">
                        <button id="rzp-button1" class="btn btn-primary">Pay with Razorpay</button>
                    </div>  {% endcomment %}
                </div>
            </div>
        </div>
    </div>

    <script>
        // Handle donation button clicks
        document.querySelectorAll('.donation-btn').forEach(button => {
            button.addEventListener('click', () => {
                const amount = button.getAttribute('data-amount');
                document.getElementById('donation-amount').value = amount;
            });
        });
    </script>


<!-- Razorpay Integration -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>

     {% comment %} // Update amount based on input
     document.getElementById('rzp-button1').onclick = function (e) {
        e.preventDefault(); // Prevent form submission
        
        const donationAmount = document.getElementById('donation-amount').value;
        if (!donationAmount || donationAmount <= 0) {
            alert("Please enter a valid donation amount.");
            return;
        } {% endcomment %}


var options = {
    "key": "rzp_test_2zJjEbeRT0fAQQ", // Replace with your Razorpay Key ID
    "amount": {{payment.amount}}* 100, // Amount in smallest currency unit (paise)
    {% comment %} "amount": "{{finalamount}}", // Amount in smallest currency unit (paise) {% endcomment %}
    "currency": "INR",
    "name": "MyBuddy",
    "description": "Secure Payment",
    "image": "https://example.com/your_logo",
    "order_id": "{{payment.id}}", // Replace with Razorpay Order ID
    "handler": function (response) {
        alert("Payment successful!");
        window.location.href = "/";
        {% comment %} window.location.href = "/payment_success/"; {% endcomment %}
    },
    "prefill": {
        "name": document.getElementById('name').value,
        "contact": document.getElementById('mobile').value
    },
    "notes": {
        "address": document.getElementById('address').value
    },
    "theme": {
        "color": "#3399cc"
    }
};
var rzp1 = new Razorpay(options);
rzp1.on('payment.failed', function (response) {
    alert("Payment failed: " + response.error.reason);
});
document.getElementById('rzp-button1').onclick = function(e) {
    rzp1.open();
    e.preventDefault();
}
</script>




</body>
{% endblock main %}
