{% extends 'base.html' %}
{% load static %}

{% block main %}

<h1>Hii</h1>
<h1>Hii</h1>
<h1>Hii</h1>
<h1>Hii</h1>

<h1>Payment Page</h1>
<p>Donation Amount1: ₹{{ donation_amount }}</p>
<p>Donation Amount2: ₹{{ payment.amount }}</p>
<div class="razorpay-button">
    <button id="rzp-button1" class="btn btn-primary">Pay with Razorpay</button>
</div>


<!-- Razorpay Integration -->

<!-- Razorpay Integration -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
var options = {
    "key": "rzp_test_2zJjEbeRT0fAQQ", // Replace with your Razorpay Key ID
    "amount": "{donation_amount}", // Amount in smallest currency unit (paise)
    "currency": "INR",
    "name": "MyBuddy",
    "description": "Secure Payment",
    "image": "https://example.com/your_logo",
    "order_id": "{{payment.id}}", // Replace with Razorpay Order ID
    "handler": function (response) {
        alert("Payment successful!");
        {% comment %} window.location.href = "/email_send/"; {% endcomment %}
        {% comment %} window.location.href = "/payment_success/"; {% endcomment %}
        windows.location.href="http://127.0.0.1:8000/"
    },
    "prefill": {
        "name": "{{name}}",
        "email": "{{email}}",
        "contact": "{{contact}}"
    },
    "notes": {
        "address": "MyBuddy"
    },
    "theme": {
        "color": "#3399cc"
    }
};
var rzp1 = new Razorpay(options);
rzp1.on('payment.failed', function (response) {
    alert("Payment failed: " + response.error.reason);
});
document.getElementById('rzp-button1').onclick = function(e) {
    rzp1.open();
    e.preventDefault();
}
</script>



{% endblock main %}